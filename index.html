<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB3QCa8l8X9LQwZVyrYlOw4bQeP1C0QMnU",
    authDomain: "key-board-ee542.firebaseapp.com",
    databaseURL: "https://key-board-ee542-default-rtdb.firebaseio.com",
    projectId: "key-board-ee542",
    storageBucket: "key-board-ee542.firebasestorage.app",
    messagingSenderId: "772948787294",
    appId: "1:772948787294:web:59e38171fa37398b4834cf",
    measurementId: "G-D5H0X47N63"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const roomId = "room_ABC123";
  const input = document.getElementById("input");

  input.addEventListener("input", () => {
    const text = input.value;

    set(ref(db, `rooms/${roomId}`), {
      text: text,
      len: text.length,
      updatedAt: Date.now()
    });
  });
</script>
